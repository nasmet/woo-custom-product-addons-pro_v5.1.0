!function(){"undefined"!=typeof wp&&wp.hooks&&wp.hooks.addFilter("wcpa_product_gallery_updated","wcpa",(function(r,i,c){return!!r||function(r,i){if(!window.jQuery)return!1;var c=jQuery(r),s=t(c,i);return!!s||!!(s=a(c,i))||!!(s=e(c,i))}(i,c)}),99);var t=function(t,a){var e=t.closest(".product").find(".images").find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0).find(".wp-post-image");if(e&&0==e.length||"function"!=typeof t.wc_variations_image_update)return!1;if(0==a)return 1!=t.data("wcpa_product_image")||(t.wc_variations_image_update(!1),t.data("wcpa_product_image",!1),t.find(".variations select").trigger("change"),!0);var r=a,i={image:r};if(jQuery.extend(i,{image:r}),null!=r.image_id&&jQuery.extend(i,{image_id:r.image_id}),"function"!=typeof t.wc_variations_image_update)return!1;(t.wc_variations_image_update(i),t.data("wcpa_product_image",!0),jQuery(".product-gallery-slider")&&"function"==typeof jQuery(".product-gallery-slider").flickity)&&jQuery(".product-gallery-slider").flickity().flickity("selectCell",0);return!0},a=function(t,a){var e=t.closest(".product, .product-col"),r=e.find(".product-image-slider,.product-gallery-slider"),i=e.find(".product-thumbs-slider"),c=r.data("owl.carousel"),s=i.data("owl.carousel"),l=!1;if(c){var o=r.data("links");if(0==a){if(r.data("wcpa")){r.trigger("remove.owl.carousel",[0]),r.data("wcpa",!1);var n=r.data("links-original");r.data("links",n)}}else{r.data("wcpa")&&r.trigger("remove.owl.carousel",[0]);var d,_=r.find(".owl-item .product-gallery-slider-item");d=_&&_.length?' <div class="product-gallery-slider-item" >\n                    <div class="product-gallery-image init-zoom">\n                        <img\n                            src="'.concat(a.full_src,'"\n                            data-src="').concat(a.full_src,'"\n                            alt="').concat(a.title,'" \n                            class="img-responsive"\n                            onload="window.dispatchEvent(new Event(\'resize\'))"\n                        >\n                    </div>\n                </div>'):'<div class="img-thumbnail">\n                            <div class="inner">\n                                <img \n                                height="'.concat(a.src_h,'" \n                                width="').concat(a.src_w,'" \n                                sizes="').concat(a.sizes,'" \n                             \n                                data-caption="').concat(a.caption,'" \n                                title="').concat(a.title,'" \n                                src="').concat(a.src,'"\n                                 \n                                 />\n                           </div> \n                        </div>'),r.trigger("add.owl.carousel",[d,0]),r.data("wcpa",!0),r.data("links-original",o),o&&Array.isArray(o)&&o.splice(0,0,{src:a.src,title:""}),r.data("links",o)}r.trigger("refresh.owl.carousel"),l=!0}return s&&(0==a?i.data("wcpa")&&(i.trigger("remove.owl.carousel",[0]),i.data("wcpa",!1)):(i.data("wcpa")&&i.trigger("remove.owl.carousel",[0]),i.trigger("add.owl.carousel",['<div class="img-thumbnail"><img src="'+a.src+'" /></div>',0]),i.data("wcpa",!0)),i.trigger("refresh.owl.carousel"),l=!0),window.setTimeout((function(){var t=e.find(".product-gallery-image.init-zoom",r);t&&t.length&&t.zoom({duration:300,touch:!1,callback:function(){}})}),20),l},e=function(t,a){jQuery.fn.wcpa_set_attr=function(t,a){void 0===this.attr("data-o_"+t)&&this.attr("data-o_"+t,this.attr(t)?this.attr(t):""),!1===a||void 0===a?this.removeAttr(t):this.attr(t,a)},jQuery.fn.wcpa_reset_attr=function(t){void 0!==this.attr("data-o_"+t)&&this.attr(t,this.attr("data-o_"+t))};var e=t.closest(".product"),r=e.find(".images"),i=e.find(".flex-control-nav"),c=i.find("li:eq(0) img");0==i.length&&(c=e.find(".thumbnail-item:eq(0) img"));var s=e.find([".woocommerce-product-gallery__image",".woocommerce-product-gallery__image--placeholder",".product-gallery",".woocommerce-product-gallery",".gem-gallery"].join(",")).eq(0),l=s.find(".wp-post-image").first();if(0==l.length&&0==(l=s.find("a img").first()).length&&0==(l=s.find("figure img").first()).length)return!1;var o=s.find("a").eq(0);(a?(l.wcpa_set_attr("src",a.src),l.wcpa_set_attr("height",a.src_h),l.wcpa_set_attr("width",a.src_w),l.wcpa_set_attr("srcset",a.srcset),l.wcpa_set_attr("sizes",a.sizes),l.wcpa_set_attr("title",a.title),l.wcpa_set_attr("data-caption",a.caption),l.wcpa_set_attr("alt",a.alt),l.wcpa_set_attr("data-src",a.full_src),l.wcpa_set_attr("data-large_image",a.full_src),l.wcpa_set_attr("data-large_image_width",a.full_src_w),l.wcpa_set_attr("data-large_image_height",a.full_src_h),s.wcpa_set_attr("data-thumb",a.src),c.wcpa_set_attr("src",a.gallery_thumbnail_src),o.wcpa_set_attr("href",a.full_src)):(l.wcpa_reset_attr("src"),l.wcpa_reset_attr("height"),l.wcpa_reset_attr("width"),l.wcpa_reset_attr("srcset"),l.wcpa_reset_attr("sizes"),l.wcpa_reset_attr("title"),l.wcpa_reset_attr("data-caption"),l.wcpa_reset_attr("alt"),l.wcpa_reset_attr("data-src"),l.wcpa_reset_attr("data-large_image"),l.wcpa_reset_attr("data-large_image_width"),l.wcpa_reset_attr("data-large_image_height"),s.wcpa_reset_attr("data-thumb"),c.wcpa_reset_attr("src"),o.wcpa_reset_attr("href")),c.click(),jQuery(".product-gallery-slider")&&"function"==typeof jQuery(".product-gallery-slider").flickity)&&jQuery(".product-gallery-slider").flickity().flickity("selectCell",0);return window.setTimeout((function(){jQuery(window).trigger("resize"),r.trigger("woocommerce_gallery_init_zoom");var t=e.find(".product-images .image-item");if(jQuery().easyZoom){var a=t.easyZoom().data("easyZoom");a.teardown(),a._init()}}),20),!0}}();